<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试</title>
    <script src="../src/router.js" charset="UTF-8"></script>
</head>
<body>

<script>
    var options = {ignorecase: true}
    var router = new Router(options);

    router.before(function(req,next){
        if( userIsLogged() === true)
            next();
        else
            next(403);
    });

    router.add('#/users/', function(req,next){
        console.log("#/users/");
        console.log(req);
    }).add('#/users/:username', function(req,next){
        var username = req.params.username;
        console.log(req.get("username"));
        console.log(req.get("uid", 18));
        console.log(req);
        if(username == "lg"){
            next(); // 被下一个再处理一次
        }
    }).add('#/users/*', function(req,next){
        console.log("#/users/*");
        console.log(req);
    }).add('#/users/**', function(req,next){
        console.log(req);
    });

    router.errors(403, function( err, href){
        alert('没有权限' + href );
    }).errors(404, function( err, href){
        alert('Page not found!' + href );
    });


    function userIsLogged(){
        return true;
    }
</script>
</body>
</html>