!function(t){function r(o){if(e[o])return e[o].exports;var n=e[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){!function(r,e,o){"use strict";t.exports=o()}("undefined"!=typeof window?window:this,"Router",function(){"use strict";var t={PATH_REPLACER:"([^/\\?]+)",PATH_NAME_MATCHER:/:([\w\d]+)/g,PATH_EVERY_MATCHER:/\/\*(?!\*)/,PATH_EVERY_REPLACER:"/([^/\\?]+)",PATH_EVERY_GLOBAL_MATCHER:/\*{2}/,PATH_EVERY_GLOBAL_REPLACER:"(.*?)\\??",LEADING_BACKSLASHES_MATCH:/\/*$/,extend:function(t){for(var r=Array.prototype.slice.call(arguments,1),e=null,o=0,n=r.length;o<n;o++){e=r[o];for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])}return t}},r={addHashChangeListener:function(t,r){t.addEventListener("hashchange",r)},removeHashChangeListener:function(t,r){t.removeEventListener("hashchange",r)}},e=function(t){this.href=t,this.params={},this.query={},this.splat={},this.hasNext=!1};e.prototype.get=function(t,r){return this.params[t]||this.query[t]||r};var o=function(e){this._options=t.extend({ignorecase:!0},e||{}),this._routes=[],this._befores=[],this._errors={_:function(t,r){console.warn("Router.js: "+t)},_404:function(t,r){console.warn("404! 无法匹配URL: "+r)},_500:function(t,r){console.error("500! 发生错误: "+r)}},r.addHashChangeListener(window,this._hashChangeHandler.bind(this))};return o.prototype.errors=function(t,r){if(isNaN(t))throw new Error("Invalid code for routes error handling");if(!(r instanceof Function))throw new Error("Invalid callback for routes error handling");return t="_"+t,this._errors[t]=r,this},o.prototype._throwsRouteError=function(t,r){return this._errors["_"+t]instanceof Function?this._errors["_"+t](t,r):this._errors._(t,r),!1},o.prototype._hashChangeHandler=function(t){return this._route(window.location.hash),!0},o.prototype._route=function(r){var e,o=[],n=this._befores.slice(),s=r;if(0===s.length)return!0;s=s.replace(t.LEADING_BACKSLASHES_MATCH,""),e=s.split("?")[0].replace(t.LEADING_BACKSLASHES_MATCH,"");for(var i=this._routes,h=0,u=i.length;h<u;h++)i[h].path.test(e)&&o.push(h);if(o.length>0)if(n.length>0){var a=n.shift();this._routeBefores(n,a,r,s,o)}else this._followRoute(r,s,o);else this._throwsRouteError(404,r)},o.prototype._routeBefores=function(t,r,e,o,n){var s;if(t.length>0){var i=t.shift();s=function(r,s){return s?this._throwsRouteError(r||500,e):void this._routeBefores(t,i,e,o,n)}.bind(this)}else s=function(t,r){return r?this._throwsRouteError(t||500,e):void this._followRoute(e,o,n)}.bind(this);r(this._buildRequestObject(e,null,null,!0),s)},o.prototype._followRoute=function(t,r,e){var o,n=e.shift(),s=this._routes[n],i=r.match(s.path),h={},u=[];if(!s)return this._throwsRouteError(500,t);for(var a=0,_=s.paramNames.length;a<_;a++)h[s.paramNames[a]]=i[a+1];if(a+=1,i&&a<i.length)for(var f=a;f<i.length;f++)u.push(i[f]);var c=0!==e.length,l=function(r,e,o,n){return function(n){return n?void this._followRoute(r,e,o):this._throwsRouteError(500,t)}.bind(this,n)}.bind(this)(t,r,e,c);o=this._buildRequestObject(t,h,u,c),s.routeAction(o,l)},o.prototype._buildRequestObject=function(t,r,o,n){var s=new e(t);return s.params=r||{},s.splat=o||{},s.hasNext=n,t.replace(/([^?&=]+)=([^&]+)/g,function(t,r,e){s.query[r]=e}),s},o.prototype.add=function(r,e){var o,n=[];if("string"==typeof r){for(r=r.replace(t.LEADING_BACKSLASHES_MATCH,"");null!==(o=t.PATH_NAME_MATCHER.exec(r));)n.push(o[1]);r=new RegExp(r.replace(t.PATH_NAME_MATCHER,t.PATH_REPLACER).replace(t.PATH_EVERY_MATCHER,t.PATH_EVERY_REPLACER).replace(t.PATH_EVERY_GLOBAL_MATCHER,t.PATH_EVERY_GLOBAL_REPLACER)+"(?:\\?.+)?$",this._options.ignorecase?"i":"")}return this._routes.push({path:r,paramNames:n,routeAction:e}),this},o.prototype.before=function(t){return this._befores.push(t),this},o.prototype.destroy=function(){r.removeHashChangeListener(window,this._hashChangeHandler)},o})}]);